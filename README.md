# kurs

## Добавление отчета через веб-форму

Раздел «Отчеты» позволяет добавлять новые выборки без изменения кода. Чтобы создать отчет:

1. Авторизуйтесь и выберите пункт меню «Отчеты» → «Создать новый отчет» (потребуются права `reports_create`).
2. Заполните поля формы:
   - **Идентификатор** — латиницей без пробелов, используется в URL (например, `client_invoices`).
   - **Заголовок** и опционально **Описание** — помогут пользователям понять назначение отчета.
   - **SQL-запрос** — текст выборки. Для параметров используйте плейсхолдеры `%(<имя>)s`; значения берутся из формы.
   - **Параметры (JSON-массив)** — список объектов с ключами `name`, `label`, при необходимости `type` (`text`/`number`/`date`) и `default`.
3. Нажмите «Сохранить». Отчет сразу попадет в список и станет доступен без рестарта приложения.

### Пример

Заполните форму следующим образом, чтобы получить отчет «Счета клиента»:

- Идентификатор: `client_invoices`
- Заголовок: `Счета клиента`
- SQL-запрос: `SELECT * FROM invoice WHERE client_id = %(client_id)s`
- Параметры (JSON-массив):

```json
[
  {"name": "client_id", "label": "ID клиента", "type": "number"}
]
```

После сохранения отчет появится в списке просмотра; при открытии его можно запускать, передавая `client_id` через форму.